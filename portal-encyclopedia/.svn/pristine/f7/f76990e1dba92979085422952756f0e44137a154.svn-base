$.fn.extend({searchKeyword:function(l,j){var b={type:1,maxResult:10,maxPinLei:5,top:0,left:0,width:0,out:"search_toplist",innerOn:"",innerOff:"search_li_bj"};l=l||{};$.extend(b,l);var f=$(this);var c=this;var g=f.attr("tagName");if(g!=null&&g!="undefind"){if(f.attr("tagName").toLowerCase()!="input"){return}}var h=+new Date,a="";a="#searchKeyWord"+h;var k=$(a);if(k.length==0){var d=$("<ul></ul>");$(this).after(d);$(d).attr({id:"searchKeyWord"+h,"class":b.out});k=d}$(a).hide();$(this).bind("keydown",function(n){var m=n.keyCode;if(!(m==38||m==40)){return}(function(){var o=null;$(a).find("li").each(function(p,q){if($(q).attr("class")==b.innerOff){o=q;return false}});if(m==38){if(o==null||o==undefined){if($(a).find("li").length>0){$(a).find("li:last").attr("class",b.innerOff)}if($(a).find("li:last").attr("tag")!="1"){$(c).val($(a).find("li:last A").attr("showname"))}}else{$(o).attr("class",b.innerOn);$(o).prev().attr("class",b.innerOff);if($(o).prev()!="1"){$(c).val($(o).prev().find("A").attr("showname"))}}}if(m==40){if(o==null||o==undefined){if($(a).find("li").length>0){$(a).find("li:first").attr("class",b.innerOff)}if($(c).attr("tag")!="1"){$(c).val($(a).find("DIV:first A").attr("showname"))}}else{$(o).attr("class",b.innerOn);$(o).next().attr("class",b.innerOff);if($(o).next().attr("tag")!="1"){$(c).val($(o).next().find("A").attr("showname"))}}}})()});$("body").click(function(){$(a).hide()});$(this).bind("click",function(m){if($(this).val()!=""){if(m&&m.stopPropagation){m.stopPropagation()}else{window.event.cancelBubble=true}}});var i="<li class='"+b.innerOn+"'  onmouseover='this.className=\""+b.innerOff+'";$("#'+$(c).attr("ID")+'").val($(this).find("a").attr("showname"))\' onmouseout=\'this.className="'+b.innerOn+"\"'  tag='0' >{NAME}</li>";var e="<li class='"+b.innerOn+"' tag='1' onmouseover='this.className=\""+b.innerOff+"\";' onmouseout='this.className=\""+b.innerOn+"\"' >{NAME}</li>";if($(this).val()!=""){f.bind("keyup",function(s){var q="supply/",r="";r=$("#searchTabUl li[class='on'] A").html();var p="";switch(r){case"供应":q="gongying.99114.com/";p=1;break;case"求购":q="caigou.99114.com/";p=2;break;case"公司":q="qiye.99114.com/";p=3;break;case"招商":q="zhaosh.99114.com/";p=4;break;case"资讯":q="zixun.99114.com/";p=5;case"百科":break;q="baike.99114.com/";p=6;break;default:q=$("#search_xl>h3>a").attr("searchtype")+"/";if(q=="/"){q="supply/"}break}var o=s.keyCode;if(o==38||o==40){return}var m=$(this).val();var n="/portal/sousuo?c=10&channel="+p+"&name="+m;$.getJSON(n,function(u){if(u!=null&&u!="undefind"){$(a).empty();if(u.searchWord.length>0){for(var t in u.searchWord){if(u.searchWord[t].Word!=undefined){k.append($(i.replace(/\{NAME\}/ig,"<a href='http://"+q+"listing/"+u.searchWord[t].Word+"' showname = "+u.searchWord[t].Word+">"+u.searchWord[t].Word.replace(f.val(),"<font color='red'>"+f.val()+"</font>")+"</a>")))}}}$(a).show()}else{$(a).hide()}})})}}});
$(function(){});function searchCartProduct(){$.ajax({type:"post",url:"/cart/list",dataType:"html",success:function(a){$("#products").html(a)}})}function updateProductNum(c,i){var f=/^[0-9]*[0-9][0-9]*$/;var k=0;var e=0;var b=$("#productNum_"+c).val();var g=$("#num_"+c).val();var j=parseInt($("#productNum_"+c).attr("max"));var d=parseInt($("#productNum_"+c).attr("min"));if(!f.test(b)){alert("请输入正整数");$("#productNum_"+c).val($("#num_"+c).val());return}if(i==1){e=$("#productNum_"+c).val();if(e==0){alert("商品数量不能为0！");$("#productNum_"+c).val($("#num_"+c).val());return}else{if(e<d){alert("商品数量不能小于最小购买数量！");$("#productNum_"+c).val($("#num_"+c).val());return}else{if(e>j){alert("商品数量不能大于最大购买数量！");$("#productNum_"+c).val($("#num_"+c).val());return}}}}else{if(i==2){var h=$("#productNum_"+c).val();if(parseInt(h)+1>j){alert("商品数量不能大于最大购买数量！");$("#productNum_"+c).val($("#num_"+c).val());return}$("#productNum_"+c).val(parseInt(h)+1);k=1}else{if(i==3){var a=$("#productNum_"+c).val();if(a==1){alert("商品数量不能为0！");return}else{if(parseInt(a)-1<d){alert("商品数量不能小于最小购买数量！");$("#productNum_"+c).val($("#num_"+c).val());return}}$("#productNum_"+c).val(parseInt(a)-1);k=-1}}}if($("#productNum_"+c).val()==$("#num_"+c).val()){return}$.ajax({type:"post",url:$WEBSITEURL+"cart/update",data:{id:c,increment:k,updateCount:e},dataType:"json",success:function(l){if(l.status==-1){$("#productNum_"+c).val($("#num_"+c).val());alert("库存不足")}else{if(l.status==0){$("#productNum_"+c).val($("#num_"+c).val());alert("修改失败")}else{if(l.status==1){$("#num_"+c).val($("#productNum_"+c).val())}else{if(l.status==-2){$("#productNum_"+c).val($("#num_"+c).val());alert("商品小于最小订货量")}}}}}})}function delProduct(a){$.ajax({type:"post",async:false,url:$WEBSITEURL+"cart/delete",data:{id:a},dataType:"json",success:function(b){searchCartProduct();if(b.status==0){}}})};